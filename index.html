<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta name="description" content="簡易電卓" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>簡易電卓</title>
    <style></style>
  </head>
  <body>
    <div class="dentaku">
      <input id="nyuryoku" readonly />
      <div class="buttonS">
        <button>7</button>
        <button>8</button>
        <button>9</button>
        <button>/</button>
        <button>4</button>
        <button>5</button>
        <button>6</button>
        <button>*</button>
        <button>1</button>
        <button>2</button>
        <button>3</button>
        <button>-</button>
        <button>0</button>
        <button>.</button>
        <button>=</button>
        <button>+</button>
        <button>C</button>
      </div>
    </div>

    <script>
      const nyuryokuEl = document.querySelector("#nyuryoku");
      const buttonSEl = document.querySelectorAll("button");

      let hyouzi = "";

      buttonSEl.forEach((botn) => {
        botn.addEventListener("click", () => {
          const value = botn.textContent;

          if (value === "=") {
            try {
              hyouzi = eval(hyouzi).toString();
            } catch {
              hyouzi = "エラー";
            }
          } else if (value === "C") {
            hyouzi = "";
          } else if (value === ".") {
            const tokens = hyouzi.split(/[\+\-\*\/]/);
            const currentNumber = tokens[tokens.length - 1];
            if (!currentNumber.includes(".")) {
              hyouzi += value;
            }
          } else {
            hyouzi += value;
          }
          nyuryokuEl.value = hyouzi;
        });
      });
    </script>
  </body>
</html>
